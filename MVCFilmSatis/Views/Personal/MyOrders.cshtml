@using MVCFilmSatis.Models
@model List<Order>
@{
    ViewBag.Title = "MyOrders";
}

<div class="container">
    <h2>MyOrders</h2>

    <table class="table table-bordered table-hover">
        <tr>
            <th>Movie</th>
            <th>Purchase Date</th>
            <th>Status</th>
            <th>Download</th>
        </tr>
        @if (Model.Count == 0)
        {
            <tr>
                <td colspan="4" class="text-center">No order found.</td>
            </tr>
        }
        else
        {
            foreach (var order in Model)
            {
                foreach (var orderitem in order.OrderItems)
                {
                    <tr>
                        <td>@orderitem.Movie.Name</td>
                        <td>@order.Date.ToString("dd.MM.yyyy")</td>
                        <td>@Html.Raw(order.IsPaid ? "Paid" : "Waiting")</td>
                        <td><a class="btn btn-success" target="_blank" href="https://r5---sn-4g5ednld.googlevideo.com/videoplayback?signature=3C3A0FD12D72F8A489CC88D16BBF3679D5968D00.A66D07EE0444A54A58E93006149C1F664D058999&amp;ei=9112XIn7Hcvv7gP756KoDg&amp;expire=1551282775&amp;c=WEB&amp;ratebypass=yes&amp;fvip=5&amp;dur=361.766&amp;ipbits=0&amp;source=youtube&amp;lmt=1538208663084634&amp;itag=22&amp;ms=au%2Crdu&amp;pl=24&amp;id=o-AGCGvvH1TrvXLk2ScmXLGHUeUaqMwEBLBOiRyzqWdu2o&amp;mn=sn-4g5ednld%2Csn-4g5e6nez&amp;mm=31%2C29&amp;key=yt6&amp;mime=video%2Fmp4&amp;mv=u&amp;sparams=dur%2Cei%2Cid%2Cip%2Cipbits%2Citag%2Clmt%2Cmime%2Cmm%2Cmn%2Cms%2Cmv%2Cpl%2Cratebypass%2Crequiressl%2Csource%2Cexpire&amp;mt=1551260783&amp;txp=5531332&amp;requiressl=yes&amp;ip=89.163.152.248&amp;video_id=@orderitem.Movie.YoutubeId&amp;title=Superman+vs+Hulk+-+The+Fight+%28Part+4%29">Download</a></td>
                    </tr>
                }

            }
        }
    </table>
</div>